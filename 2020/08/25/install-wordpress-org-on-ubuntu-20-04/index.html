<!DOCTYPE html>
<html lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.0/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"8.0.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}};
  </script>

<link rel="stylesheet" href="/js/prism/prism.css">

  <meta name="description" content="如何在Ubuntu20.04服务器上搭建WordPress.org网站">
<meta property="og:type" content="article">
<meta property="og:title" content="如何在Ubuntu20.04服务器上搭建WordPress.org网站">
<meta property="og:url" content="http://example.com/2020/08/25/install-wordpress-org-on-ubuntu-20-04/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="如何在Ubuntu20.04服务器上搭建WordPress.org网站">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://zpj.io/wp-content/uploads/2020/10/Apache2-Ubuntu-Default-Page.png">
<meta property="og:image" content="https://zpj.io/wp-content/uploads/2020/10/wordpress%E5%90%8E%E5%8F%B0.png">
<meta property="og:image" content="https://zpj.io/wp-content/uploads/2020/10/wordpress%E9%BB%98%E8%AE%A4%E7%99%BB%E5%85%A5%E7%95%8C%E9%9D%A2.png">
<meta property="og:image" content="https://zpj.io/wp-content/uploads/2020/10/wordpress%E5%88%9D%E6%AC%A1%E5%A1%AB%E5%86%99%E4%BF%A1%E6%81%AF.png">
<meta property="og:image" content="https://zpj.io/wp-content/uploads/2020/10/wordpress-sucess-config-php.png">
<meta property="og:image" content="https://zpj.io/wp-content/uploads/2020/10/wordpress-config.png">
<meta property="og:image" content="https://zpj.io/wp-content/uploads/2020/10/wordpress-installation-init.png">
<meta property="og:image" content="https://zpj.io/wp-content/uploads/2020/10/wordpress-installaion.png">
<meta property="og:image" content="https://zpj.io/wp-content/uploads/2020/10/wordpress-success.png">
<meta property="og:image" content="https://zpj.io/wp-content/uploads/2020/10/wordpress-login-init.png">
<meta property="og:image" content="https://zpj.io/wp-content/uploads/2020/10/wordpress-login.png">
<meta property="og:image" content="https://zpj.io/wp-content/uploads/2020/10/wordpress-dashboard-1024x503.png">
<meta property="og:image" content="https://zpj.io/wp-content/uploads/2020/10/wordpress-site-init-1-1024x506.png">
<meta property="og:image" content="https://zpj.io/wp-content/uploads/2020/10/wordpress-first-problem-1024x235.png">
<meta property="og:image" content="https://zpj.io/wp-content/uploads/2020/10/wordpress-first-solve.png">
<meta property="og:image" content="https://zpj.io/wp-content/uploads/2020/10/wordpress-upload-2M-1024x468.png">
<meta property="og:image" content="https://zpj.io/wp-content/uploads/2020/10/wordpress-phpinfo-1024x304.png">
<meta property="og:image" content="https://zpj.io/wp-content/uploads/2020/10/wordpress-upload-512M-1024x468.png">
<meta property="article:published_time" content="2020-08-25T04:51:54.000Z">
<meta property="article:modified_time" content="2020-10-23T09:01:01.000Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="Setup">
<meta property="article:tag" content="Ubuntu">
<meta property="article:tag" content="wordpress">
<meta property="article:tag" content="XichengRen">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zpj.io/wp-content/uploads/2020/10/Apache2-Ubuntu-Default-Page.png">


<link rel="canonical" href="http://example.com/2020/08/25/install-wordpress-org-on-ubuntu-20-04/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>如何在Ubuntu20.04服务器上搭建WordPress.org网站 | Hexo</title>
  






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Hexo</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
          <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E6%93%8D%E4%BD%9C%E5%B9%B3%E5%8F%B0"><span class="nav-number">1.</span> <span class="nav-text">1.操作平台</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%AE%89%E8%A3%85%E5%BF%85%E5%A4%87%E8%BD%AF%E4%BB%B6"><span class="nav-number">2.</span> <span class="nav-text">2.安装必备软件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%91-%E5%AE%89%E8%A3%85PHP"><span class="nav-number">2.1.</span> <span class="nav-text">１.安装PHP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E5%AE%89%E8%A3%85LAMP"><span class="nav-number">2.2.</span> <span class="nav-text">2.安装LAMP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E6%A3%80%E6%B5%8B%E5%AE%89%E8%A3%85"><span class="nav-number">2.3.</span> <span class="nav-text">3.检测安装</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E9%85%8D%E7%BD%AEMySQL"><span class="nav-number">3.</span> <span class="nav-text">3.配置MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AEMySQL"><span class="nav-number">3.1.</span> <span class="nav-text">1.安全配置MySQL</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E4%BF%AE%E6%94%B9%E9%98%B2%E7%81%AB%E5%A2%99%E9%85%8D%E7%BD%AE"><span class="nav-number">3.2.</span> <span class="nav-text">2.修改防火墙配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E7%94%A8%E6%88%B7%E8%B4%A6%E6%88%B7"><span class="nav-number">3.3.</span> <span class="nav-text">3. 创建数据库和用户账户</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85WordPress"><span class="nav-number">4.</span> <span class="nav-text">4.下载安装WordPress</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-number">5.</span> <span class="nav-text">5.注意事项</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%8F%91%E5%B8%83%E5%A4%B1%E8%B4%A5%E3%80%82-%E6%AD%A4%E5%93%8D%E5%BA%94%E4%B8%8D%E6%98%AF%E5%90%88%E6%B3%95%E7%9A%84JSON%E5%93%8D%E5%BA%94-Publishing-failed-The-response-is-not-a-valid-JSON-response"><span class="nav-number">5.1.</span> <span class="nav-text">1.发布失败。 此响应不是合法的JSON响应(Publishing failed. The response is not a valid JSON response)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E4%BF%AE%E6%94%B9%E5%9B%BA%E5%AE%9A%E9%93%BE%E6%8E%A5%E6%A0%BC%E5%BC%8F"><span class="nav-number">5.1.1.</span> <span class="nav-text">1.修改固定链接格式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E4%BF%AE%E6%94%B9-htaccess%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E4%BB%A5%E5%8F%8A%E4%BF%AE%E6%94%B9apache2-conf%E5%86%85%E5%AE%B9"><span class="nav-number">5.1.2.</span> <span class="nav-text">2.修改.htaccess文件权限以及修改apache2.conf内容</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E5%AE%89%E8%A3%85%E4%B8%BB%E9%A2%98%E6%88%96%E6%8F%92%E4%BB%B6%E9%9C%80%E8%A6%81FTP"><span class="nav-number">5.2.</span> <span class="nav-text">2.安装主题或插件需要FTP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E4%BF%AE%E6%94%B9WordPress%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E9%99%90%E5%88%B6-Maximum-upload-file-size-2-MB"><span class="nav-number">5.3.</span> <span class="nav-text">3.修改WordPress文件上传限制(Maximum upload file size: 2 MB.)</span></a></li></ol></li></ol></div>
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">3</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </section>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/renxincheng" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">
      

      

  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/25/install-wordpress-org-on-ubuntu-20-04/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          如何在Ubuntu20.04服务器上搭建WordPress.org网站
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-08-25 12:51:54" itemprop="dateCreated datePublished" datetime="2020-08-25T12:51:54+08:00">2020-08-25</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2020-10-23 17:01:01" itemprop="dateModified" datetime="2020-10-23T17:01:01+08:00">2020-10-23</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Research/" itemprop="url" rel="index"><span itemprop="name">Research</span></a>
        </span>
    </span>

  
</div>

            <div class="post-description">如何在Ubuntu20.04服务器上搭建WordPress.org网站</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>This is an article written by my student Xincheng Ren. He helps me setup this site.</p>
<hr>
<p>本文将详细介绍如何在Ubuntu20.04服务器上搭建WordPress.org网站。按照此教程所述的步骤进行，你将成功在你的服务器上搭建一个自己的WordPress.org网站。</p>
<h3 id="1-操作平台"><a href="#1-操作平台" class="headerlink" title="1.操作平台"></a>1.操作平台</h3><p>安装了Ubuntu20.04的服务器</p>
<h3 id="2-安装必备软件"><a href="#2-安装必备软件" class="headerlink" title="2.安装必备软件"></a>2.安装必备软件</h3><h4 id="１-安装PHP"><a href="#１-安装PHP" class="headerlink" title="１.安装PHP"></a>１.安装PHP</h4><p>在服务器端命令行执行：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 安装php</span>
$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php-curl php-gd php-mbstring php-xml php-xmlrpc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>注意：这些软件不包含在LAMP中，需要额外手动安装。</p>
<h4 id="2-安装LAMP"><a href="#2-安装LAMP" class="headerlink" title="2.安装LAMP"></a>2.安装LAMP</h4><p>LAMP(Linux + Apache + MySQL/MariaDB + PHP)是最经典的建站环境之一，安装LAMP只需要一句命令：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 安装LAMP</span>
$ <span class="token function">sudo</span> tasksel <span class="token function">install</span> lamp-server<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>或者可以在tasksel用户界面来安装LAMP：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 进入tasksel用户界面</span>
$ <span class="token function">sudo</span> tasksel
<span class="token comment"># 上下选择到LAMP server，按下空格键进行选择和取消，按下Tab键，确认即可</span>


Package configuration

  ┌───────────────────────────────────┤ Software selection ├────────────────────────────────────┐
  │ You can choose to <span class="token function">install</span> one or <span class="token function">more</span> of the following predefined collections of software.  │ 
  │                                                                                             │ 
  │ Choose software to install:                                                                 │ 
  │                                                                                             │ 
  │    <span class="token punctuation">[</span> <span class="token punctuation">]</span> Xubuntu live CD                                                                  ↑   │ 
  │    <span class="token punctuation">[</span> <span class="token punctuation">]</span> Ubuntu Cloud Image <span class="token punctuation">(</span>instance<span class="token punctuation">)</span>                                                    ▮   │ 
  │    <span class="token punctuation">[</span> <span class="token punctuation">]</span> DNS server                                                                       ▒   │ 
  │    <span class="token punctuation">[</span> <span class="token punctuation">]</span> Kubuntu desktop                                                                  ▒   │ 
  │    <span class="token punctuation">[</span> <span class="token punctuation">]</span> LAMP server                                                                      ▒   │ 
  │    <span class="token punctuation">[</span> <span class="token punctuation">]</span> Lubuntu Desktop                                                                  ↓   │ 
  │                                                                                             │ 
  │                                                                                             │ 
  │                                           <span class="token operator">&lt;</span>Ok<span class="token operator">></span>                                              │ 
  │                                                                                             │ 
  └─────────────────────────────────────────────────────────────────────────────────────────────┘                                                                             <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="3-检测安装"><a href="#3-检测安装" class="headerlink" title="3.检测安装"></a>3.检测安装</h4><p>以上步骤完成后，在服务器端会生成一个新的目录/var/www/html，在新的目录下会生成一个新的文件index.html，完整的目录为：/var/www/html/index.html。若存在这个文件，则可在浏览器输入你的IP地址并确认(若不知道服务器IP地址，可以在服务器端命令行输入curl ifconfig.me并确认来查看)，一切顺利的话即可在出现图1所示界面。</p>
<p><img src="https://zpj.io/wp-content/uploads/2020/10/Apache2-Ubuntu-Default-Page.png"></p>
<p>图1-apache2默认界面</p>
<p>若没有出现图1界面，则可以尝试卸载apache2再次安装。一些apache2常用命令如下：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 安装apache2</span>
$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> apache2

<span class="token comment"># 卸载apache2(若图1界面未显示,可加上--purge参数来删除配置信息,再安装)</span>
$ <span class="token function">sudo</span> <span class="token function">apt</span> remove apache2
$ <span class="token function">sudo</span> <span class="token function">apt</span> remove apache2 --purge

<span class="token comment"># 启动apache2服务</span>
$ systemctl start apache2.service

<span class="token comment"># 停止apache2服务</span>
$ systemctl stop apache2.service

<span class="token comment"># 重启apache2服务</span>
$ systemctl restart apache2.service<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>最终保证可以在浏览器输入IP地址确认后可以出现图1界面即可。</p>
<h3 id="3-配置MySQL"><a href="#3-配置MySQL" class="headerlink" title="3.配置MySQL"></a>3.配置MySQL</h3><h4 id="1-安全配置MySQL"><a href="#1-安全配置MySQL" class="headerlink" title="1.安全配置MySQL"></a>1.安全配置MySQL</h4><p>虽然安装LAMP后，在MySQL中会有一些默认设置，但是还是应该修改一下MySQL的一些设置，以提高MySQL的安全性。包括：<br>1.为本地管理员帐户设置密码；<br>2.删除可以从外部访问的管理员帐户；<br>3.删除匿名用户账户；<br>4.删除测试数据库（默认情况下，所有用户，甚至匿名用户都可以访问该数据库），以及允许所有用户访问以``test_”开头的数据库。</p>
<p>运行命令：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 安全配置MySQL</span>
$ <span class="token function">sudo</span> mysql_secure_installation

<span class="token comment"># 会按照一下顺序出现在终端中</span>

Securing the MySQL server deployment.

Connecting to MySQL using a blank password.

VALIDATE PASSWORD COMPONENT can be used to <span class="token builtin class-name">test</span> passwords
and improve security. It checks the strength of password
and allows the <span class="token function">users</span> to <span class="token builtin class-name">set</span> only those passwords <span class="token function">which</span> are
secure enough. Would you like to setup VALIDATE PASSWORD component?

Press yY <span class="token keyword">for</span> Yes, any other key <span class="token keyword">for</span> No: Y（用户输入确认）

There are three levels of password validation policy:

LOW    Length <span class="token operator">></span><span class="token operator">=</span> <span class="token number">8</span>
MEDIUM Length <span class="token operator">></span><span class="token operator">=</span> <span class="token number">8</span>, numeric, mixed case, and special characters
STRONG Length <span class="token operator">></span><span class="token operator">=</span> <span class="token number">8</span>, numeric, mixed case, special characters and dictionary                  <span class="token function">file</span>

Please enter <span class="token number">0</span> <span class="token operator">=</span> LOW, <span class="token number">1</span> <span class="token operator">=</span> MEDIUM and <span class="token number">2</span> <span class="token operator">=</span> STRONG: <span class="token number">1</span>（用户输入确认）
Please <span class="token builtin class-name">set</span> the password <span class="token keyword">for</span> root here.

New password: （用户输入确认）

Re-enter new password: （用户输入确认）

Estimated strength of the password: <span class="token number">100</span> 
Do you wish to <span class="token builtin class-name">continue</span> with the password provided?<span class="token punctuation">(</span>Press yY <span class="token keyword">for</span> Yes, any other key <span class="token keyword">for</span> No<span class="token punctuation">)</span> <span class="token builtin class-name">:</span> Y（用户输入确认）
By default, a MySQL installation has an anonymous user,
allowing anyone to log into MySQL without having to have
a user account created <span class="token keyword">for</span> them. This is intended only <span class="token keyword">for</span>
testing, and to <span class="token function">make</span> the installation go a bit smoother.
You should remove them before moving into a production
environment.

Remove anonymous users? <span class="token punctuation">(</span>Press yY <span class="token keyword">for</span> Yes, any other key <span class="token keyword">for</span> No<span class="token punctuation">)</span> <span class="token builtin class-name">:</span> Y（用户输入确认）
Success.


Normally, root should only be allowed to connect from
<span class="token string">'localhost'</span><span class="token builtin class-name">.</span> This ensures that someone cannot guess at
the root password from the network.

Disallow root login remotely? <span class="token punctuation">(</span>Press yY <span class="token keyword">for</span> Yes, any other key <span class="token keyword">for</span> No<span class="token punctuation">)</span> <span class="token builtin class-name">:</span> Y（用户输入确认）
Success.

By default, MySQL comes with a database named <span class="token string">'test'</span> that
anyone can access. This is also intended only <span class="token keyword">for</span> testing,
and should be removed before moving into a production
environment.


Remove <span class="token builtin class-name">test</span> database and access to it? <span class="token punctuation">(</span>Press yY <span class="token keyword">for</span> Yes, any other key <span class="token keyword">for</span> No<span class="token punctuation">)</span> <span class="token builtin class-name">:</span> Y（用户输入确认）

 - Dropping <span class="token builtin class-name">test</span> database<span class="token punctuation">..</span>.
   Success.

 - Removing privileges on <span class="token builtin class-name">test</span> database<span class="token punctuation">..</span>.
   Success.

Reloading the privilege tables will ensure that all changes
made so far will take effect immediately.

Reload privilege tables now? <span class="token punctuation">(</span>Press yY <span class="token keyword">for</span> Yes, any other key <span class="token keyword">for</span> No<span class="token punctuation">)</span> <span class="token builtin class-name">:</span> Y（用户输入确认）
Success.

All done<span class="token operator">!</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>至此，MySQL安全配置完成。</p>
<h4 id="2-修改防火墙配置"><a href="#2-修改防火墙配置" class="headerlink" title="2.修改防火墙配置"></a>2.修改防火墙配置</h4><p>修改防火墙以允许外部访问默认的Web端口。配置一个UFW防火墙来限制对服务器的访问。<br>允许Apache Full（此配置文件打开端口80（正常，未加密的Web流量）和端口443（TLS / SSL加密流量））配置文件的传入流量。</p>
<p>运行命令：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 添加防火墙</span>
$ <span class="token function">sudo</span> ufw allow <span class="token keyword">in</span> <span class="token string">'Apache Full'</span>
Rules updated
Rules updated <span class="token punctuation">(</span>v6<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>接下来可以查看防火墙状态：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 查看防火墙状态</span>
$ <span class="token function">sudo</span> ufw status
Status: active

To                         Action      From
--                         ------      ----
Apache Full                ALLOW       Anywhere     
Apache Full <span class="token punctuation">(</span>v6<span class="token punctuation">)</span>           ALLOW       Anywhere <span class="token punctuation">(</span>v6<span class="token punctuation">)</span> 

<span class="token comment"># 假如显示的结果是：</span>
Status: inactive

<span class="token comment"># 则需要启动防火墙</span>
$ <span class="token function">sudo</span> ufw <span class="token builtin class-name">enable</span>
Firewall is active and enabled on system startup<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="3-创建数据库和用户账户"><a href="#3-创建数据库和用户账户" class="headerlink" title="3. 创建数据库和用户账户"></a>3. 创建数据库和用户账户</h4><p>首先以管理员用户登录：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 管理员账户登录MySQL</span>
$ <span class="token function">sudo</span> mysql -u root -p
Enter password: （用户输入确认）
Welcome to the MySQL monitor.  Commands end with <span class="token punctuation">;</span> or g.
Your MySQL connection <span class="token function">id</span> is <span class="token number">14</span>
Server version: <span class="token number">8.0</span>.21-0ubuntu0.20.04.4 <span class="token punctuation">(</span>Ubuntu<span class="token punctuation">)</span>

Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">2000</span>, <span class="token number">2020</span>, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type <span class="token string">'help;'</span> or <span class="token string">'h'</span> <span class="token keyword">for</span> help. Type <span class="token string">'c'</span> to <span class="token function">clear</span> the current input statement.

mysql<span class="token operator">></span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>创建一个名为wordpress的数据库：</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">mysql&gt; CREATE DATABASE wordpress;
Query OK, 1 row affected (0.00 sec)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>创建一个wordpress用户并授权：用户名为’username’，密码为<code>&#39;Userpwd123+&#39;</code>，<code>&#39;%&#39;</code>表示允许远程登陆但是不允许本机登录；赋予权限表示将数据库<code>wordpress</code>下的所有表授权给用户<code>&#39;username&#39;</code>，这样用户<code>&#39;username&#39;</code>就能远程访问到这个数据库(<code>wordpress</code>)下的所有表。</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">--创建用户
mysql&gt; CREATE USER &#39;username&#39;@&#39;%&#39; IDENTIFIED BY &#39;Userpwd123+&#39;;
Query OK, 0 rows affected (0.01 sec)

--赋予权限
--不同版本赋予权限的语法不同，应具体根据自己的MySQL版本，本机版本为8.0.21-0ubuntu0.20.04.4
mysql&gt; GRANT ALL ON wordpress.* to &#39;username&#39;@&#39;%&#39;;
Query OK, 0 rows affected (0.00 sec)

--刷新MySQL的系统权限相关表
mysql&gt; FLUSH PRIVILEGES;
Query OK, 0 rows affected (0.01 sec)

--退出
mysql&gt; exit;
Bye<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="4-下载安装WordPress"><a href="#4-下载安装WordPress" class="headerlink" title="4.下载安装WordPress"></a>4.下载安装WordPress</h3><p>下载最新版本的WordPress：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 进入/var/www/html目录</span>
$ <span class="token builtin class-name">cd</span> /var/www/html

<span class="token comment"># 删除index.html</span>
$ <span class="token function">sudo</span> <span class="token function">rm</span> index.html

<span class="token comment"># 下载最新版本WordPress到/var/www/html目录</span>
$ <span class="token function">sudo</span> <span class="token function">wget</span> https://wordpress.org/latest.tar.gz

<span class="token comment"># 解压WordPress</span>
$ <span class="token function">sudo</span> <span class="token function">tar</span> xpf latest.tar.gz
$ <span class="token function">ls</span>
latest.tar.gz  wordpress

<span class="token comment"># 把解压之后的文件拷贝到/var/www/html</span>
$ <span class="token function">sudo</span> <span class="token function">cp</span> -R /var/www/html/wordpress/* /var/www/html/

<span class="token comment"># 删除解压之后的wordpress目录和压缩包</span>
$ <span class="token function">sudo</span> <span class="token function">rm</span> -rf wordpress latest.tar.gz

<span class="token comment"># 查看当前目录文件</span>
$ <span class="token function">ls</span>
index.php        wp-admin              wp-content         wp-load.php      wp-signup.php
license.txt      wp-blog-header.php    wp-cron.php        wp-login.php     wp-trackback.php
readme.html      wp-comments-post.php  wp-includes        wp-mail.php      xmlrpc.php
wp-activate.php  wp-config-sample.php  wp-links-opml.php  wp-settings.php

<span class="token comment"># 更改文件夹的拥有者为指定的组</span>
$ <span class="token function">sudo</span> <span class="token function">chown</span> -R www-data:www-data /var/www/html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>首次登录WordPress后台，在浏览器端输入服务器IP地址并确认，WordPress正确安装的话即可出现图2界面：</p>
<p><img src="https://zpj.io/wp-content/uploads/2020/10/wordpress%E5%90%8E%E5%8F%B0.png"></p>
<p>图2-首次打开WordPress</p>
<p>点击``Let’s go!”按钮，出现图3所示界面：</p>
<p><img src="https://zpj.io/wp-content/uploads/2020/10/wordpress%E9%BB%98%E8%AE%A4%E7%99%BB%E5%85%A5%E7%95%8C%E9%9D%A2.png"></p>
<p>图3-数据库信息初始界面</p>
<p>图3中需要填写五项信息，分别为：<br>1.数据库名称，在本文中需要填写<code>wordpress&quot;;   2.用户名，即给用户赋予操作</code>wordpress”数据库权利的名称，本文中填写<code>username&quot;;   3.密码，对应用户名的密码，本文中填写</code>Userpwd123+”;<br>4.数据库所在服务器IP地址；<br>5.该WordPress所使用数据库表前缀，如果你需要在一个数据库中运行多个WordPress，则需要更改此项，本文不更改。</p>
<p>全部输入完成如图4所示：</p>
<p><img src="https://zpj.io/wp-content/uploads/2020/10/wordpress%E5%88%9D%E6%AC%A1%E5%A1%AB%E5%86%99%E4%BF%A1%E6%81%AF.png"></p>
<p>图4-数据库信息的填写</p>
<p>点击图4中的``Submit”按钮，即可出现图5界面：</p>
<p><img src="https://zpj.io/wp-content/uploads/2020/10/wordpress-sucess-config-php.png"></p>
<p>图5-数据库连接成功</p>
<p>点击图5中的<code>Run the installation&quot;按钮进入图7所示界面。或者出现如图6所示，这表示自动创建</code>wp-config.php”文件失败：</p>
<p><img src="https://zpj.io/wp-content/uploads/2020/10/wordpress-config.png"></p>
<p>图6-无法自动创建wp-config.php文件</p>
<p>图6提示自动创建wp-config.php失败，可以在/var/www/html目录下自行创建一个名为<code>wp-config.php&quot;文件，并将文本框中的内容复制进去，然后保存文件，之后之后点击</code>Run the installation”按钮即可出现图7界面：</p>
<p><img src="https://zpj.io/wp-content/uploads/2020/10/wordpress-installation-init.png"></p>
<p>图7-WordPress后台登录信息填写初始界面</p>
<p>在图7中填入所有信息后如图8所示：</p>
<p><img src="https://zpj.io/wp-content/uploads/2020/10/wordpress-installaion.png"></p>
<p>图8-WordPress后台登录信息填写完成</p>
<p>点击图8中的``Install WordPress”按钮进入图9界面：</p>
<p><img src="https://zpj.io/wp-content/uploads/2020/10/wordpress-success.png"></p>
<p>图9-WordPress用户注册成功</p>
<p>点击图9中的``Log in”按钮，进入图10所示界面：</p>
<p><img src="https://zpj.io/wp-content/uploads/2020/10/wordpress-login-init.png"></p>
<p>图10-初始登录界面</p>
<p>将图8中的信息填入在图10中之后，如图11所示：</p>
<p><img src="https://zpj.io/wp-content/uploads/2020/10/wordpress-login.png"></p>
<p>图11-填入用户名和密码</p>
<p>点击图11中的``Log in”按钮进入图12所示后台界面：</p>
<p><img src="https://zpj.io/wp-content/uploads/2020/10/wordpress-dashboard-1024x503.png"></p>
<p>图12-WordPress后台界面</p>
<p>在WordPress后台，你可以操作并更改你的整个网站，在浏览器端输入主机IP地址或者主机域名/wp-admin并确认即可登录你的网站。例如:_xxx.xxx.xxx.xxx/wp-admin_。<br>在浏览器端直接输入主机IP或者域名则会有图13所示WordPress主界面：</p>
<p><img src="https://zpj.io/wp-content/uploads/2020/10/wordpress-site-init-1-1024x506.png"></p>
<p>图13-WordPress网站主界面</p>
<p>看见图13界面即表明你的WordPress网站已经搭建成功。至此，在Ubuntu20.04服务器上搭建WordPress.org网站已经进行完毕。</p>
<h3 id="5-注意事项"><a href="#5-注意事项" class="headerlink" title="5.注意事项"></a>5.注意事项</h3><p>下面列出的为使用WordPress中常见的问题以及解决方案：</p>
<h4 id="1-发布失败。-此响应不是合法的JSON响应-Publishing-failed-The-response-is-not-a-valid-JSON-response"><a href="#1-发布失败。-此响应不是合法的JSON响应-Publishing-failed-The-response-is-not-a-valid-JSON-response" class="headerlink" title="1.发布失败。 此响应不是合法的JSON响应(Publishing failed. The response is not a valid JSON response)"></a>1.发布失败。 此响应不是合法的JSON响应(Publishing failed. The response is not a valid JSON response)</h4><p><img src="https://zpj.io/wp-content/uploads/2020/10/wordpress-first-problem-1024x235.png"></p>
<p>图14-此响应不是合法的JSON响应</p>
<p>发表文章(Post)或者页面(Page)时候提示：发布失败。 此响应不是合法的JSON响应 (Publishing failed. The response is not a valid JSON response)。<br>解决此问题有多种方法，在这里只推荐两种方法，可以多尝试另外多种方法。推荐方法如下所示：</p>
<h5 id="1-修改固定链接格式"><a href="#1-修改固定链接格式" class="headerlink" title="1.修改固定链接格式"></a>1.修改固定链接格式</h5><p>进入WordPress后台，如图12所示，依次点击设置(Settings)-&gt;固定链接(Permalinks)-&gt;常用设置(Common Settings)。将固定链接格式改为文章名(Post name)，若已经是文章名，则修改为其他一种，保存，再将格式改为文章名保存。或者直接修改为朴素(Plain)，但是不建议这样修改，这样修改固定链接会变得难以理解，图中展示了修改为文章名的结果：</p>
<p><img src="https://zpj.io/wp-content/uploads/2020/10/wordpress-first-solve.png"></p>
<p>图15-修改固定链接格式</p>
<h5 id="2-修改-htaccess文件权限以及修改apache2-conf内容"><a href="#2-修改-htaccess文件权限以及修改apache2-conf内容" class="headerlink" title="2.修改.htaccess文件权限以及修改apache2.conf内容"></a>2.修改.htaccess文件权限以及修改apache2.conf内容</h5><p>修改服务器中/var/www/html/.htaccess的权限，修改为755：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 修改权限</span>
$ <span class="token function">sudo</span> <span class="token function">chmod</span> <span class="token number">755</span> /var/www/html/.htaccess<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>之后修改固定链接格式为文章名(Post name)，测试是否成功。若依然失败，则需要保证启动mod_rewrite(默认不启动)，之后重启apache2服务器：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 启动mod_rewrite</span>
$ <span class="token function">sudo</span> a2enmod rewrite
Enabling module rewrite.
To activate the new configuration, you need to run:
  systemctl restart apache2

<span class="token comment"># 重启apache2服务器</span>
$ <span class="token function">sudo</span> systemctl restart apache2.service

<span class="token comment"># 如果执行sudo a2enmod rewrite之后出现如下，则mod_rewrite之前已经启动，无需重启apache2服务器</span>
Module rewrite already enabled<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>之后修改固定链接格式为文章名(Post name)，测试是否成功。若还是失败，则说明您的apache2配置可能太严格了，需要修改服务器上/etc/apache2/apache2.conf文件内容。首先打开/etc/apache2/apache2.conf，然后在文件中查找如下：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 查找如下字符串</span>
AllowOverride None

<span class="token comment"># 找到如下内容</span>
<span class="token operator">&lt;</span>Directory /var/www/<span class="token operator">></span>
Options Indexes FollowSymLinks
AllowOverride None
Require all granted
<span class="token operator">&lt;</span>/Directory<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>将AllowOverride None中的None修改为All。之后重启apache2服务(sudo systemctl restart apache2.service)。<br>最终修改固定链接测试是否成功。</p>
<h4 id="2-安装主题或插件需要FTP"><a href="#2-安装主题或插件需要FTP" class="headerlink" title="2.安装主题或插件需要FTP"></a>2.安装主题或插件需要FTP</h4><p>进入服务器端/var/www/html/wp-content目录，新建一个名为tmp的文件夹，并设置tmp文件夹的权限为777(/var/www/html/wp-content/tmp)。之后返回到网站根目录(/var/www/html)，编辑wp-config.php并添加如下代码：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">define</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'WP_TEMP_DIR'</span><span class="token punctuation">,</span><span class="token constant">ABSPATH</span><span class="token punctuation">.</span><span class="token single-quoted-string string">'wp-content/tmp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token double-quoted-string string">"FS_METHOD"</span><span class="token punctuation">,</span><span class="token double-quoted-string string">"direct"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token double-quoted-string string">"FS_CHMOD_DIR"</span><span class="token punctuation">,</span><span class="token number">0777</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token double-quoted-string string">"FS_CHMOD_FILE"</span><span class="token punctuation">,</span><span class="token number">0777</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>添加之后的结果内容如下：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token comment">/** Absolute path to the WordPress directory. */</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span> <span class="token function">defined</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'ABSPATH'</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
<span class="token function">define</span><span class="token punctuation">(</span> <span class="token single-quoted-string string">'ABSPATH'</span><span class="token punctuation">,</span> <span class="token constant">__DIR__</span> <span class="token punctuation">.</span> <span class="token single-quoted-string string">'/'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token function">define</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'WP_TEMP_DIR'</span><span class="token punctuation">,</span><span class="token constant">ABSPATH</span><span class="token punctuation">.</span><span class="token single-quoted-string string">'wp-content/tmp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token double-quoted-string string">"FS_METHOD"</span><span class="token punctuation">,</span><span class="token double-quoted-string string">"direct"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token double-quoted-string string">"FS_CHMOD_DIR"</span><span class="token punctuation">,</span><span class="token number">0777</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token double-quoted-string string">"FS_CHMOD_FILE"</span><span class="token punctuation">,</span><span class="token number">0777</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/** Sets up WordPress vars and included files. */</span>
<span class="token keyword">require_once</span> <span class="token constant">ABSPATH</span> <span class="token punctuation">.</span> <span class="token single-quoted-string string">'wp-settings.php'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<p>之后设置WordPress的主题文件夹(/var/www/html/wp-content/themes)和插件文件夹(/var/www/html/wp-content/plugins)的权限为777。之后便可以更新主体和插件，而不需要FTP。</p>
<h4 id="3-修改WordPress文件上传限制-Maximum-upload-file-size-2-MB"><a href="#3-修改WordPress文件上传限制-Maximum-upload-file-size-2-MB" class="headerlink" title="3.修改WordPress文件上传限制(Maximum upload file size: 2 MB.)"></a>3.修改WordPress文件上传限制(Maximum upload file size: 2 MB.)</h4><p>WordPress上传文件一般都有限制文件大小，通常为2M，如图16所示：</p>
<p><img src="https://zpj.io/wp-content/uploads/2020/10/wordpress-upload-2M-1024x468.png"></p>
<p>图16-限制上传文件大小为2M</p>
<p>这个限制大小包括图片和视频，一般情况下，对于大部分视频或者部分图片来讲2M大小的空间是不够用的。这时，就需要修改上传文件大小限制，从而上传大于2M的多媒体文件。<br>WordPress上传文件限制是由PHP的环境配置决定的，通过更改PHP的配置文件可以修改上传限制，PHP的配置文件名为php.ini，全路径通常为：/etc/php/PHP版本号/apache2/php.ini。若配置文件位置未知，则可以在网站根目录(/var/www/html)下新建一个名为phpinfo.php的php文件，内容为：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">// 查看PHP配置信息</span>
<span class="token function">phpinfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>保存文件之后在浏览器端输入：主机IP地址/phpinfo.php确认即可得到类似如图17：</p>
<p><img src="https://zpj.io/wp-content/uploads/2020/10/wordpress-phpinfo-1024x304.png"></p>
<p>图17</p>
<p>即可得知PHP配置文件的路径为：/etc/php/7.4/apache2/php.ini。随后打开该路径下的php.ini，在配置文件中搜索三个参数：upload_max_filesize，post_max_size和max_execution_time，如下：</p>
<pre class="line-numbers language-ini" data-language="ini"><code class="language-ini"><span class="token comment">; Maximum allowed size for uploaded files.</span>
<span class="token comment">; http://php.net/upload-max-filesize</span>
<span class="token constant">upload_max_filesize</span> <span class="token attr-value"><span class="token punctuation">=</span> 2M</span>
...
<span class="token comment">; Maximum size of POST data that PHP will accept.</span>
<span class="token comment">; Its value may be 0 to disable the limit. It is ignored if POST data reading</span>
<span class="token comment">; is disabled through enable_post_data_reading.</span>
<span class="token comment">; http://php.net/post-max-size</span>
<span class="token constant">post_max_size</span> <span class="token attr-value"><span class="token punctuation">=</span> 8M</span>
...
<span class="token comment">; Maximum execution time of each script, in seconds</span>
<span class="token comment">; http://php.net/max-execution-time</span>
<span class="token comment">; Note: This directive is hardcoded to 0 for the CLI SAPI</span>
<span class="token constant">max_execution_time</span> <span class="token attr-value"><span class="token punctuation">=</span> 30</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>upload_max_filesize为文件的最大上传大小，在这里为2M，也是默认的大小，可以更改为512M；post_max_size为PHP将接受的POST数据的最大大小，也可以更改为512M；max_execution_time为执行时间，在这里即为上传文件的最大时间，超过最大时间的话，服务器将会强制终端任务，在这里可以更改为600，即10分钟。以上修改值仅为参考，可根据自己的具体情况进行更改。<br>修改完成保存文件，重启apache2服务器：sudo systemctl restart apache2.service。即可发现最大上传文件大小已经修改为512M，如图18：</p>
<p><img src="https://zpj.io/wp-content/uploads/2020/10/wordpress-upload-512M-1024x468.png"></p>
<p>图18-最大上传限制修改为512M</p>
<p>至此，修改WordPress文件上传限制完成。</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Setup/" rel="tag"># Setup</a>
              <a href="/tags/Ubuntu/" rel="tag"># Ubuntu</a>
              <a href="/tags/wordpress/" rel="tag"># wordpress</a>
              <a href="/tags/XichengRen/" rel="tag"># XichengRen</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
            </div>
            <div class="post-nav-item">
                <a href="/2020/09/07/how-to-setup-ubuntu-software-ppa-repo/" rel="next" title="如何建立一个个人软件包仓库(PPA)">
                  如何建立一个个人软件包仓库(PPA) <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






      

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

    </div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      

      

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>
<script src="/js/prism/prism.js" async></script>

    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

  


















  








  

  

</body>
</html>
